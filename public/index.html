<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mat√©ria Prima Triunfo</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <!-- Header -->
    <header>
        <div class="container">
            <div class="logo">Mat√©ria Prima <span>Triunfo</span></div>
            <nav>
                <ul>
                    <li><a href="#home">In√≠cio</a></li>
                    <li><a href="produtos.html">Produtos</a></li>
                    <li><a href="#contato">Contato</a></li>
                </ul>
            </nav>
            <div class="carrinho-icon" onclick="abrirCarrinho()">
                Carrinhoüõí <span id="quantidade-carrinho">0</span>
            </div>
            <div id="usuario-logado" class="usuario-logado-header"></div>
        </div>
    </header>

    <!-- Banner -->
    <section class="banner" id="home">
        <div class="slide">
            <img src="imgs/Shop Now.png" alt="Banner 1">
        </div>
    </section>

    <!-- Categorias -->
    <section class="categorias">
        <div class="container">
            <button onclick="filtrarCategoria('todos')">Todos</button>
            <button onclick="filtrarCategoria('whey')">Whey</button>
            <button onclick="filtrarCategoria('creatina')">Creatina</button>
            <button onclick="filtrarCategoria('pre-treino')">Pr√©-treino</button>
        </div>
    </section>
    <h1 style="text-align: center; font-family: Arial, Helvetica, sans-serif;">Proutos em destaque</h1>
    <!-- Produtos -->
    <section class="produtos" id="produtos">
        <div class="container">
            <div class="produtos-destaque">
                <div id="grid-produtos"></div>
            </div>
        </div>
    </section>

    <!-- Carrinho -->
    <div id="carrinho" class="carrinho">
        <h2>Seu Carrinho</h2>
        <ul id="lista-carrinho"></ul>
        <p>Total: <span id="total">R$ 0,00</span></p>
        <button onclick="fecharCarrinho()">Fechar</button>
        <button id="btn-checkout">Finalizar Compra</button>
    </div>

    <!-- Footer -->
    <footer id="contato">
        <div class="container">
            <p>&copy; 2025 Mat√©ria Prima Triunfo - Todos os direitos reservados.</p>
        </div>
    </footer>

<script src="js/script.js" defer></script>
<script>
// Exibe nome do usu√°rio logado e bot√£o de logout
  document.addEventListener('DOMContentLoaded', async () => {
    const usuarioEmail = localStorage.getItem('usuario');
    const el = document.getElementById('usuario-logado');
    if (usuarioEmail && el) {
      let nome = localStorage.getItem('usuario_nome');
      if (!nome) {
        try {
          const res = await fetch('/api/usuario_nome?email=' + encodeURIComponent(usuarioEmail));
          if (res.ok) {
            const data = await res.json();
            nome = data.nome;
            localStorage.setItem('usuario_nome', nome);
          }
        } catch {}
      }
      el.innerHTML = `<b>${nome || usuarioEmail}</b> <button onclick="logout()">Sair</button>`;
    } else if (el) {
      el.innerHTML = `<a href="login.html">Entrar</a> <a href="cadastro.html">Cadastrar</a>`;
    }

    // Torna os cards clic√°veis para abrir detalhes
    document.querySelectorAll('.produtos-destaque .card').forEach(card => {
      card.addEventListener('click', function(e) {
        // Evita conflito com o clique do bot√£o
        if (e.target.tagName === 'BUTTON') return;
        const id = card.getAttribute('data-id');
        if (id) {
          window.location.href = `produto.html?id=${id}`;
        }
      });
    });
  });
</script>
</body>
</html>
